<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="studentLogin.css"/>
</head>
<body>
<div class="top-bar">
    <h2 class="top-bar-title">å­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿ</h2>
</div>
<div id="app">
    <div class="left-column">

        <!-- åŠŸèƒ½åŒºåŸŸ -->
        <h2 style="text-align: center;" title="å­¦ç”Ÿç™»å½•">â€”â€”å­¦ç”Ÿä¿¡æ¯ç®¡ç†â€”â€”</h2>
        <hr>
        <br>
        <li class="left-column-work">ä¿®æ”¹å·ç </li>
        <br>
        <li class="left-column-work" @click="coursesSelect">å¯é€‰è¯¾ç¨‹</li>
        <br>
        <li class="left-column-work">æˆ‘çš„è¯¾ç¨‹</li>
        <br>
        <hr>
        <h3>ğŸ“šä¸ªäººä¿¡æ¯</h3>
        <div>ğŸ‘¤å§“åï¼š{{studentInfo.name}}</div>
        <br>
        <div v-if="studentInfo.phoneNumber">
            ğŸ“å·ç ï¼š{{studentInfo.phoneNumber}}
        </div>
        <br>
        <div>ğŸ“®é‚®ç®±ï¼š{{studentInfo.email}}</div>
        <br>
        <div>ğŸ‚ç”Ÿæ—¥ï¼š{{studentInfo.birthday}}</div>
        <br>
        <div v-bind:title="studentInfo.classHadSelected">ğŸ“å·²é€‰è¯¾ç¨‹æ•°ï¼š{{studentInfo.classNumber}}</div>
        <br>
        <div>ğŸ“Œæœ€å¤šåªèƒ½é€‰5é—¨è¯¾ç¨‹å“¦ï¼</div>
        <br>
        <hr>

    </div>

    <div class="right-column">
        <table v-if="isSelect">
            <tr>
                <th>è¯¾ç¨‹åºå·</th>
                <th>è¯¾ç¨‹åç§°</th>
                <th>è¯¾ç¨‹ä¿¡æ¯</th>
                <th>è¯¾ç¨‹å­¦åˆ†</th>
                <th>è¯¾ç¨‹æ“ä½œ</th>
            </tr>
            <tr v-for="couCanSel in coursesCanSelect">
                <td>{{couCanSel.key}}</td>
                <td>{{couCanSel.courseName}}</td>
                <td>{{couCanSel.information}}</td>
                <td>{{couCanSel.score}}</td>
                <td class="left-column-work">
                    é€‰è¯¾
                </td>
            </tr>
        </table>
    </div>
</div>

<script src="https://cdn.bootcdn.net/ajax/libs/axios/1.6.7/axios.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.14/vue.min.js"></script>

<script>

    new Vue({
            el: '#app',
            data: {
                studentInfo: {},// å­˜å‚¨å­¦ç”Ÿä¸ªäººä¿¡æ¯
                coursesCanSelect: [],
                isSelect: false
            },
            mounted() {
                if (typeof axios === 'undefined') {
                    console.error('Axios is not loaded!');
                    return;
                }
                // é¡µé¢åŠ è½½å®Œæˆåï¼Œå‘é€å¼‚æ­¥è¯·æ±‚ï¼ŒæŸ¥è¯¢æ•°æ®
                let that = this;
                axios.post('/student/mLook',{})
                    .then(response => {
                        if (response.data.code === 200) {
                            that.studentInfo = response.data.data; // ä¸ªäººä¿¡æ¯
                        }
                        else if (response.data.code === 401) {
                            alert("æ‚¨è¿˜æœªç™»å½•ï¼");
                            window.location.href = '/vueLogin.html';
                        } else {
                            console.error('è·å–æ•°æ®å¤±è´¥:', response.data.message);
                        }
                    })
                    .catch(error => {
                        console.error('è¯·æ±‚é”™è¯¯:', error);
                    });
            },
            created() {
                this.coursesSelect();
                this.isSelect = false;
            },
            methods: {
                coursesSelect() {
                    this.isSelect = true;
                    let that = this;
                    axios.get('/student/scLook', {}).then(response => {
                        that.coursesCanSelect = response.data;
                    })
                }
            }
        },
    )

</script>
</body>
</html>